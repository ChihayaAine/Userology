# 访谈总结模块 - 测试检查清单

> 创建时间：2025-01-20  
> 当前进度：Phase 1 ✅ | Phase 2 ⏳

---

## ✅ 已完成

### Phase 1: 数据库Migration
- [x] Migration执行成功
- [x] 验证6个字段已添加
- [x] 后端服务运行正常 (http://localhost:8090)
- [x] 前端服务运行正常 (http://localhost:8089)
- [x] OpenAI API已配置

---

## 📋 待测试项目

### Task 2.2: 创建测试Study

**步骤**:
1. 打开浏览器：http://localhost:8089/dashboard
2. 点击 "Create New Study"
3. 填写以下信息：

```
Name: Summary Feature Test
Objective: 了解用户对AI写作工具的需求和痛点，生成3个产品改进建议
Type: 产品调研
Questions: 5
Duration: 15分钟
Interviewer: 选择任意面试官
```

4. 点击生成问题
5. 保存Study

**验证点**:
- [ ] Study创建成功
- [ ] 可以看到访谈链接
- [ ] 问题生成正常

---

### Task 2.3: 进行测试访谈

**步骤**:
1. 复制Study的访谈链接
2. 在新标签页打开
3. 完成一次5-10分钟的访谈
4. 确保访谈正常结束

**测试内容建议**（模拟真实用户）:
```
- 我经常需要写工作报告，但总是不知道怎么开头
- 我希望AI能帮我快速生成大纲
- 我担心AI生成的内容太机械，缺乏人情味
- 我需要能够自定义写作风格的功能
- 价格是我考虑的重要因素
```

**验证点**:
- [ ] 访谈正常进行
- [ ] 访谈正常结束
- [ ] Dashboard中可以看到访谈记录

---

### Task 2.4: 验证单访谈自动生成 ⭐ **核心功能**

**步骤**:
1. 在Dashboard中点击Study
2. 点击刚才的访谈记录
3. 向下滚动查看总结部分
4. 等待自动生成（可能需要30-60秒）

**验证点**:
- [ ] 看到 "Key Insights" 卡片
- [ ] 看到 "Important Quotes" 卡片
- [ ] Key Insights有3-5条（或1-5条，取决于访谈长度）
- [ ] 每条Insight有分类标签（need, pain_point, behavior等）
- [ ] Important Quotes有5-10条（或2-10条）
- [ ] 每条Quote有时间戳（MM:SS格式）
- [ ] UI样式正常，无错误

**如果没有生成**:
1. 检查浏览器Console是否有错误
2. 检查后端Terminal日志，查找：
   ```
   🔍 [Interview Summary] Starting generation for call: xxx
   ✅ [Interview Summary] Generated successfully
   ```
3. 如果看到错误，记录错误信息

---

### Task 2.5: 进行更多测试访谈

**步骤**:
在同一个Study中再进行2-3次访谈（可以快速测试，5分钟/次）

**测试场景**:
- 访谈2：不同的痛点和需求
- 访谈3：价格敏感用户
- 访谈4（可选）：重度用户

**验证点**:
- [ ] 每次访谈都自动生成Key Insights和Important Quotes
- [ ] Study中有至少3个访谈记录
- [ ] 所有访谈的总结都正常显示

---

### Task 2.6: 测试Study总结生成 ⭐ **核心功能**

**步骤**:
1. 访问Study页面
2. 点击 "Study Insights" Tab
3. 点击 "Generate Insights" 按钮
4. 等待生成（约30-60秒）

**验证点**:
- [ ] "Generate Insights" 按钮正常工作
- [ ] 显示加载状态
- [ ] 生成成功后显示以下内容：

#### Executive Summary
- [ ] 显示一段话的执行摘要
- [ ] 内容与Study Objective相关
- [ ] 语言流畅，有洞察力

#### Objective Deliverables
- [ ] 显示基于Objective的可交付成果
- [ ] 应该包含"产品改进建议"（因为Objective中提到）
- [ ] 内容结构清晰

#### Cross-Interview Insights
- [ ] 显示5-8条跨访谈洞察
- [ ] 每条洞察有重要性标签（high/medium/low）
- [ ] 显示支持证据数量

#### Evidence Bank
- [ ] 显示洞察与用户引用的关联
- [ ] 每条引用显示用户名和访谈ID
- [ ] 点击可以查看详情

**如果生成失败**:
1. 检查后端日志
2. 确认有足够的访谈数据（至少1个）
3. 检查OpenAI API是否正常

---

### Task 2.7: 测试编辑功能

**步骤**:
1. 在Study Insights页面，点击Executive Summary右上角的编辑按钮
2. 修改内容（例如：添加一句话）
3. 点击保存
4. 刷新页面验证

**验证点**:
- [ ] 编辑按钮正常显示
- [ ] 点击后进入编辑模式
- [ ] 可以修改内容
- [ ] 保存按钮正常工作
- [ ] 取消按钮正常工作
- [ ] 刷新后修改仍然存在（数据持久化）

---

## 🎯 成功标准

当以下所有项都完成时，Phase 2测试通过：

- [ ] 创建了测试Study
- [ ] 完成了至少3次访谈
- [ ] 每次访谈都自动生成了Key Insights和Important Quotes
- [ ] Study总结生成成功
- [ ] 编辑功能正常工作
- [ ] 所有UI正常显示，无错误

---

## 🚨 常见问题

### 1. Key Insights没有自动生成
**可能原因**:
- 访谈太短（<2分钟）
- Transcript为空
- OpenAI API错误

**解决方法**:
- 检查后端日志
- 确认访谈正常结束
- 检查OpenAI API配置

### 2. Study总结生成失败
**可能原因**:
- 没有足够的访谈数据
- 访谈没有analytics数据
- OpenAI API超时

**解决方法**:
- 确保至少有1个访谈
- 确保访谈有Key Insights
- 重试生成

### 3. 编辑后数据没有保存
**可能原因**:
- API调用失败
- 数据库连接问题

**解决方法**:
- 检查浏览器Console
- 检查后端日志
- 检查Supabase连接

---

## 📝 测试记录

### 测试1: [日期时间]
- Study名称: 
- 访谈数量: 
- 结果: ✅/❌
- 备注: 

### 测试2: [日期时间]
- Study名称: 
- 访谈数量: 
- 结果: ✅/❌
- 备注: 

---

**开始测试吧！** 🚀

