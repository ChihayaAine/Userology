# 任务清单

> **最后更新**: 2025-10-30
> **当前版本**: v1.4.2

---

## 🔥 当前任务

### 无进行中的任务

---

## 📋 待办任务

### 功能开发
- [ ] 测试两步大纲生成系统
  - [ ] 测试 Session 配置传导功能
  - [ ] 测试必问问题功能
  - [ ] 测试多层次追问策略
  - [ ] 测试智能问题数量分配
  - [ ] 测试 Session Depth Level 系统
    - [ ] 验证 AI 判断的 depth level 是否合理
    - [ ] 验证用户调整 depth level 功能
    - [ ] 验证完整大纲是否严格遵循 depth level
  - [ ] 验证结束访谈提示
  - [ ] 验证生成的大纲质量

### 文档完善
- [ ] 补全 API 文档
- [ ] 补全部署文档
- [ ] 补全开发指南

---

## ✅ 已完成任务

### 2025-10-30 (v1.4.2)
- [x] **Session Depth Level 系统** 🎯
  - [x] 添加 `SessionDepthLevel` 类型定义（high/medium/low）
  - [x] 更新骨架生成 Prompt
    - [x] 添加 "Session Depth Level Assignment" 部分
    - [x] AI 根据研究目标判断每个 Session 的深度等级
    - [x] 更新 Output Format 和 Quality Checklist
  - [x] 更新完整大纲生成 Prompt
    - [x] 显示每个 Session 的 depth level
    - [x] 严格遵循 depth level 分配问题数量
  - [x] 添加 Depth Level 选择器 UI
    - [x] 在 SessionCard 中显示三个按钮（Low/Medium/High）
    - [x] 颜色编码（灰色/蓝色/紫色）
    - [x] 显示 AI 建议和问题数量
    - [x] 支持用户调整
  - [x] 更新 CHANGELOG.md (v1.4.2)
  - [x] 更新任务清单.md

### 2025-10-30 (v1.4.1)
- [x] **大纲生成 Prompt 优化 - 用户体验提升** 🎨
  - [x] 结束访谈提示
    - [x] 在最后一个 Session 添加明确的"点击结束访谈按钮"提示
  - [x] 多层次追问策略（L1 → L2 → L3）
    - [x] 设计分层追问机制（Surface → Examples → Impact）
    - [x] 更新 Follow-up Strategy 部分
    - [x] 添加详细示例和指导原则
  - [x] 智能问题数量分配
    - [x] 根据 Session 优先级分配 4-6 个问题
    - [x] 高优先级 Session: 5-6 个问题
    - [x] 中优先级 Session: 4-5 个问题
    - [x] 低优先级 Session: 4 个问题
  - [x] 修复 researchType 字段导致的 500 错误
  - [x] 更新 CHANGELOG.md (v1.4.1)
  - [x] 更新任务清单.md

### 2025-10-30 (v1.4.0)
- [x] **两步大纲生成系统完整实现** ✨
  - [x] 数据库迁移（添加 outline_skeleton, outline_generation_status, skeleton_generated_at）
  - [x] Session 配置传导到骨架生成
    - [x] 后端 Prompt 接收 manualSessions 参数
    - [x] 前端传递用户输入的 Session 主题
    - [x] AI 严格遵循用户指定的主题
  - [x] 必问问题功能
    - [x] 类型定义添加 must_ask_questions 字段
    - [x] SessionCard UI 添加必问问题输入
    - [x] 完整大纲生成 Prompt 处理必问问题
    - [x] 自然融入访谈流程并标记
  - [x] 后端 API 实现
    - [x] POST /api/outlines/skeleton
    - [x] PATCH /api/outlines/:id/skeleton
    - [x] POST /api/outlines/:id/full-outline
  - [x] 前端 UI 实现
    - [x] SessionCard 组件（编辑 Session）
    - [x] SkeletonReview 组件（预览骨架）
    - [x] questions.tsx 主流程逻辑
  - [x] 状态管理（Zustand Store）
  - [x] 更新 CHANGELOG.md (v1.4.0)
  - [x] 更新任务清单.md

---

## ✅ 已完成任务

### 2025-10-26
- [x] 同步母项目更新到本地和 GitHub Fork
  - [x] Commit 本地文档修改
  - [x] Merge upstream/master
  - [x] Push 到 origin/master
- [x] 分析母项目变动（Session 数量智能补全机制）
- [x] 更新项目文档
  - [x] 更新 `docs/03-大纲生成系统.md`（添加智能补全机制章节）
  - [x] 更新 `docs/CHANGELOG.md`（v1.3.6 版本记录）
  - [x] 更新 `docs/任务清单.md`

### 2025-10-24
- [x] 初始化项目状态文档系统
  - [x] 扫描项目核心功能模块
  - [x] 创建任务清单.md
  - [x] 补全核心功能模块文档（5个）
  - [x] 按业务流程重新编号文档
  - [x] 更新 README.md 导航
  - [x] 更新 CHANGELOG.md
  - [x] 更新 Augment-Memories.md
- [x] 优化规则文件和 Memories 定位
  - [x] 更新 `.augment/rules/项目状态维护规则.md`
  - [x] 更新 `.augment/rules/rule.md`
  - [x] 重构 `docs/Augment-Memories.md`（改为当前状态快照）
- [x] 删除已合并的 feature 分支
- [x] 同步 master 分支到最新
- [x] 学习 Git 工作流最佳实践

### 2025-10-23
- [x] 大纲本地化功能开发
- [x] 访谈链接前缀修复
- [x] 创建 PR 并成功合并到母项目

---

## 📝 备注

- 遵循 `.augment/rules/rule.md` 中的文档创建规则
- 只为核心功能模块创建独立文档
- 小优化和 Bug 修复记录在 CHANGELOG 中

