# è®¿è°ˆé—®é¢˜ç”Ÿæˆç³»ç»Ÿ

> **ç‰ˆæœ¬**: 1.3.8
> **æœ€åæ›´æ–°**: 2025-10-26
> **é‡è¦æ›´æ–°**: è¿½é—®ç”Ÿæˆé€»è¾‘ä¼˜åŒ–ï¼ˆæ–¹å‘æ€§æŒ‡ç¤ºã€Session æŠ½è±¡åŒ–ã€ç§»é™¤å†—ä½™æŒ‡å¯¼ï¼‰

---

## ğŸ“– ç³»ç»Ÿæ¦‚è¿°

è®¿è°ˆé—®é¢˜ç”Ÿæˆç³»ç»Ÿæ˜¯ Userology çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œè´Ÿè´£æ ¹æ®ç ”ç©¶ç›®æ ‡è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„è®¿è°ˆé—®é¢˜æˆ–æ·±åº¦è®¿è°ˆå¤§çº²ã€‚ç³»ç»Ÿæ”¯æŒä¸¤ç§æ¨¡å¼ï¼š

1. **æ ‡å‡†é—®é¢˜æ¨¡å¼** (Lisa/Bob)ï¼šç”Ÿæˆå›ºå®šé—®é¢˜åˆ—è¡¨
2. **æ·±åº¦è®¿è°ˆæ¨¡å¼** (David)ï¼šç”Ÿæˆå¤šé˜¶æ®µ Session å¤§çº²

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
å‰ç«¯åˆ›å»ºç•Œé¢
    â†“
API è·¯ç”±å±‚
    â†“
Questions Controller
    â†“
OpenAI GPT-4o
    â†“
è¿”å›ç”Ÿæˆçš„é—®é¢˜/Sessions
```

### æŠ€æœ¯æ ˆ

- **AI æ¨¡å‹**: OpenAI GPT-4o
- **API ä»£ç†**: tu-zi.com
- **Prompt å·¥ç¨‹**: ä¸“ä¸šåŒ–çš„ System Prompt å’Œ User Prompt
- **è¾“å‡ºæ ¼å¼**: JSON (ç»“æ„åŒ–æ•°æ®)

---

## ğŸ¯ åŠŸèƒ½æ¨¡å¼

### æ¨¡å¼ 1: æ ‡å‡†é—®é¢˜ç”Ÿæˆ (Lisa/Bob)

**é€‚ç”¨åœºæ™¯**ï¼š
- å¿«é€Ÿç”¨æˆ·è°ƒç ”
- æ ‡å‡†åŒ–è®¿è°ˆæµç¨‹
- éœ€è¦å›ºå®šé—®é¢˜åˆ—è¡¨çš„åœºæ™¯

**API ç«¯ç‚¹**ï¼š
```
POST /api/generate-interview-questions
```

**è¯·æ±‚å‚æ•°**ï¼š
```typescript
{
  name: string;              // ç ”ç©¶åç§°
  objective: string;         // ç ”ç©¶ç›®æ ‡
  number: number;            // é—®é¢˜æ•°é‡
  context: string;           // ä¸Šä¸‹æ–‡ï¼ˆå¯é€‰ï¼‰
  researchType: string;      // ç ”ç©¶ç±»å‹
  customInstructions: string; // ä¸ªæ€§åŒ–å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
  language: string;          // è®¿è°ˆè¯­è¨€ï¼ˆå¯é€‰ï¼‰
  outline_debug_language: string; // å¤§çº²è°ƒè¯•è¯­è¨€ï¼ˆå¯é€‰ï¼‰
}
```

**å“åº”æ ¼å¼**ï¼š
```typescript
{
  questions: Array<{
    id: string;
    question: string;
    follow_up_count: number;
  }>;
  description: string; // ç ”ç©¶æè¿°
}
```

**Prompt æ–‡ä»¶**ï¼š
- `backend/src/lib/prompts/generate-questions.ts`

---

### æ¨¡å¼ 2: æ·±åº¦è®¿è°ˆ Sessions (David)

**é€‚ç”¨åœºæ™¯**ï¼š
- æ·±åº¦ç”¨æˆ·ç ”ç©¶
- éœ€æ±‚æ¢ç´¢
- äº§å“è°ƒç ”

**API ç«¯ç‚¹**ï¼š
```
POST /api/generate-interview-sessions
```

**è¯·æ±‚å‚æ•°**ï¼šåŒæ ‡å‡†æ¨¡å¼

**å“åº”æ ¼å¼**ï¼š
```typescript
{
  sessions: Array<{
    session_number: number;
    session_title: string;
    session_objective: string;
    questions: Array<{
      id: string;
      question: string;
      follow_up_count: number;
    }>;
  }>;
  description: string;
}
```

**Prompt æ–‡ä»¶**ï¼š
- å¸‚åœºè°ƒç ”ï¼š`backend/src/lib/prompts/generate-market-research-sessions.ts`
- äº§å“è°ƒç ”ï¼š`backend/src/lib/prompts/generate-product-research-sessions.ts`
- é€šç”¨ï¼š`backend/src/lib/prompts/generate-sessions.ts`

---

## ğŸ”§ å®ç°ç»†èŠ‚

### Controller å±‚

**æ–‡ä»¶**: `backend/src/controllers/questions.controller.ts`

**æ ¸å¿ƒå‡½æ•°**ï¼š

#### 1. `generateInterviewQuestions`

```typescript
export const generateInterviewQuestions = async (req: Request, res: Response) => {
  const { name, objective, number, context, researchType, customInstructions, language, outline_debug_language } = req.body;
  
  // 1. æ„å»º Prompt
  const prompt = generateQuestionsPrompt({
    name,
    objective,
    number,
    context,
    customInstructions,
    language: outline_debug_language || language
  });
  
  // 2. è°ƒç”¨ OpenAI
  const completion = await openaiClient.chat.completions.create({
    model: "gpt-4o",
    messages: [
      { role: "system", content: SYSTEM_PROMPT },
      { role: "user", content: prompt }
    ],
    response_format: { type: "json_object" }
  });
  
  // 3. è§£æå¹¶è¿”å›
  const content = completion.choices[0].message?.content;
  res.status(200).json({ response: content });
};
```

#### 2. `generateInterviewSessions`

```typescript
export const generateInterviewSessions = async (req: Request, res: Response) => {
  const { researchType } = req.body;
  
  // æ ¹æ®ç ”ç©¶ç±»å‹é€‰æ‹©ä¸åŒçš„ Prompt
  const promptConfig = researchType === 'market_research' 
    ? { system: SYSTEM_PROMPT_MARKET_RESEARCH, generator: generateMarketResearchSessionsPrompt }
    : { system: SYSTEM_PROMPT_PRODUCT_RESEARCH, generator: generateProductResearchSessionsPrompt };
  
  // ç”Ÿæˆ Sessions...
};
```

---

## ğŸ“ Prompt å·¥ç¨‹

### System Prompt è®¾è®¡åŸåˆ™

1. **è§’è‰²å®šä½æ˜ç¡®**ï¼šå®šä¹‰ AI ä¸ºä¸“ä¸šç”¨æˆ·ç ”ç©¶ä¸“å®¶
2. **è¾“å‡ºæ ¼å¼è§„èŒƒ**ï¼šæ˜ç¡® JSON ç»“æ„è¦æ±‚
3. **è´¨é‡æ ‡å‡†**ï¼šå¼ºè°ƒé—®é¢˜çš„å¼€æ”¾æ€§ã€æ·±åº¦å’Œç›¸å…³æ€§

### User Prompt ç»“æ„

```
ç ”ç©¶æ ‡é¢˜: ${name}
ç ”ç©¶ç›®æ ‡: ${objective}
é—®é¢˜æ•°é‡: ${number}

[å¯é€‰] ä¸Šä¸‹æ–‡ä¿¡æ¯: ${context}
[å¯é€‰] ä¸ªæ€§åŒ–å¤‡æ³¨: ${customInstructions}
[å¯é€‰] è¯­è¨€è¦æ±‚: ${language}

è¾“å‡ºè¦æ±‚:
- JSON æ ¼å¼
- åŒ…å«é—®é¢˜åˆ—è¡¨å’Œç ”ç©¶æè¿°
- é—®é¢˜éœ€è¦å¼€æ”¾å¼ã€æ·±å…¥ã€ç›¸å…³
```

---

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

### è¯­è¨€å‚æ•°

- `language`: è®¿è°ˆè¯­è¨€ï¼ˆæœ€ç»ˆè®¿è°ˆä½¿ç”¨çš„è¯­è¨€ï¼‰
- `outline_debug_language`: å¤§çº²è°ƒè¯•è¯­è¨€ï¼ˆç ”ç©¶è€…è°ƒè¯•ç”¨ï¼‰

### è¯­è¨€ä¼˜å…ˆçº§

```
outline_debug_language > language > 'en-US' (é»˜è®¤)
```

### æ”¯æŒçš„è¯­è¨€

- `zh-CN`: ç®€ä½“ä¸­æ–‡
- `zh-TW`: ç¹ä½“ä¸­æ–‡
- `en-US`: è‹±è¯­
- `ja-JP`: æ—¥è¯­

---

## ğŸ”„ ä¸å¤§çº²æœ¬åœ°åŒ–çš„é›†æˆ

ç”Ÿæˆçš„é—®é¢˜å¯ä»¥é€šè¿‡å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½è¿›è¡Œè¯­è¨€è½¬æ¢ï¼š

```
1. ä½¿ç”¨ outline_debug_language ç”Ÿæˆåˆç¨¿
   â†“
2. ç ”ç©¶è€…å®¡æ ¸å’Œè°ƒæ•´
   â†“
3. è°ƒç”¨ /api/localize-outline æœ¬åœ°åŒ–åˆ°ç›®æ ‡è¯­è¨€
   â†“
4. ç”Ÿæˆæœ€ç»ˆè®¿è°ˆå¤§çº²
```

è¯¦è§ï¼š[å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½æ–‡æ¡£](./03-å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½.md)

---

## ğŸ¨ å‰ç«¯é›†æˆ

### åˆ›å»ºè®¿è°ˆæµç¨‹

**æ–‡ä»¶**: `frontend/src/components/dashboard/interview/create-popup/details.tsx`

**æµç¨‹**ï¼š

1. ç”¨æˆ·å¡«å†™ç ”ç©¶ä¿¡æ¯
2. é€‰æ‹©é¢è¯•å®˜ï¼ˆLisa/Bob/Davidï¼‰
3. ç‚¹å‡»"Generate with AI"
4. è°ƒç”¨å¯¹åº”çš„ API
5. æ˜¾ç¤ºç”Ÿæˆçš„é—®é¢˜
6. è¿›å…¥é—®é¢˜ç¼–è¾‘ç•Œé¢

### å…³é”®ä»£ç 

```typescript
const onGenerate = async () => {
  const data = {
    name, objective, number: numQuestions,
    context, researchType, customInstructions,
    language: selectedLanguage,
    outline_debug_language: outlineDebugLanguage
  };
  
  const apiEndpoint = isDeepDiveMode 
    ? "/generate-interview-sessions"
    : "/generate-interview-questions";
  
  const response = await apiClient.post(apiEndpoint, data, {
    timeout: 120000 // 2åˆ†é’Ÿè¶…æ—¶
  });
  
  // å¤„ç†å“åº”...
};
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### è¶…æ—¶è®¾ç½®

- **æ ‡å‡†é—®é¢˜ç”Ÿæˆ**: 120ç§’
- **æ·±åº¦ Sessions ç”Ÿæˆ**: 120ç§’

### é”™è¯¯å¤„ç†

```typescript
try {
  // ç”Ÿæˆé—®é¢˜...
} catch (error) {
  if (error.code === 'ECONNABORTED') {
    // è¶…æ—¶é”™è¯¯
  } else if (error.response?.status === 429) {
    // API é…é¢é™åˆ¶
  } else {
    // å…¶ä»–é”™è¯¯
  }
}
```

---

## ğŸ“Š æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥
  â†“
å‰ç«¯éªŒè¯
  â†“
API è¯·æ±‚ (POST /api/generate-interview-questions)
  â†“
Controller æ¥æ”¶å‚æ•°
  â†“
æ„å»º Prompt
  â†“
è°ƒç”¨ OpenAI GPT-4o
  â†“
è§£æ JSON å“åº”
  â†“
è¿”å›å‰ç«¯
  â†“
æ˜¾ç¤ºé—®é¢˜åˆ—è¡¨
  â†“
ç”¨æˆ·ç¼–è¾‘å’Œä¿å­˜
```

---

## ğŸ” è°ƒè¯•å’Œæ—¥å¿—

### å…³é”®æ—¥å¿—ç‚¹

```typescript
console.log('ğŸš€ Generating questions with data:', data);
console.log('ğŸ“ OpenAI Response:', content);
console.log('âœ… Questions generated successfully');
```

### å¸¸è§é—®é¢˜

1. **ç”Ÿæˆçš„é—®é¢˜ä¸ç¬¦åˆé¢„æœŸ**
   - æ£€æŸ¥ Prompt æ˜¯å¦æ¸…æ™°
   - è°ƒæ•´ `customInstructions`
   - å¢åŠ  `context` ä¿¡æ¯

2. **API è¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - æ£€æŸ¥ OpenAI API çŠ¶æ€
   - å¢åŠ è¶…æ—¶æ—¶é—´

3. **è¯­è¨€ä¸æ­£ç¡®**
   - æ£€æŸ¥ `outline_debug_language` å‚æ•°
   - æ£€æŸ¥ Prompt ä¸­çš„è¯­è¨€æŒ‡ä»¤

4. **ç”Ÿæˆçš„ Session æ•°é‡ä¸æ­£ç¡®** (v1.3.6 å·²ä¿®å¤)
   - é—®é¢˜ï¼šGPT æœ‰æ—¶ä¼šç”Ÿæˆé”™è¯¯æ•°é‡çš„ Sessions
   - è§£å†³æ–¹æ¡ˆï¼šæ™ºèƒ½è¡¥å…¨æœºåˆ¶ï¼ˆè‡ªåŠ¨æ£€æµ‹å¹¶è¡¥å…¨ç¼ºå¤±çš„ Sessionsï¼‰

---

## ğŸ”§ æ™ºèƒ½è¡¥å…¨æœºåˆ¶ (v1.3.6)

### é—®é¢˜èƒŒæ™¯

åœ¨æ·±åº¦è®¿è°ˆæ¨¡å¼ï¼ˆDavidï¼‰ä¸­ï¼ŒGPT æœ‰æ—¶ä¼šç”Ÿæˆé”™è¯¯æ•°é‡çš„ Sessionsï¼š
- ç”¨æˆ·è¯·æ±‚ 10 ä¸ª Sessionsï¼ŒGPT å¯èƒ½åªç”Ÿæˆ 8 ä¸ª
- ç”¨æˆ·è¯·æ±‚ 5 ä¸ª Sessionsï¼ŒGPT å¯èƒ½ç”Ÿæˆ 6 ä¸ª

### è§£å†³æ–¹æ¡ˆ

**ä¸‰å±‚ä¿éšœæœºåˆ¶**ï¼š

#### 1. Prompt å¼ºåŒ–ï¼ˆé¢„é˜²ï¼‰

åœ¨ User Prompt ä¸­æ·»åŠ ä¸¥æ ¼çš„æ•°é‡è¦æ±‚ï¼š

```typescript
âš ï¸ **STRICT SESSION COUNT REQUIREMENT** âš ï¸:
You MUST generate EXACTLY ${requestedCount} sessions - no more, no less.
- âŒ Do NOT generate ${requestedCount + 1} sessions
- âŒ Do NOT generate ${requestedCount - 1} sessions
- âœ… Generate EXACTLY ${requestedCount} complete sessions
- If you generate the wrong number, the system will malfunction
```

#### 2. æ™ºèƒ½è¡¥å…¨ï¼ˆä¿®å¤ï¼‰

å¦‚æœ GPT ç”Ÿæˆçš„æ•°é‡ä¸è¶³ï¼Œè‡ªåŠ¨è°ƒç”¨ GPT è¡¥å…¨ï¼š

```typescript
// æ£€æµ‹æ•°é‡ä¸åŒ¹é…
if (actualCount < requestedCount) {
  const missing = requestedCount - actualCount;

  // è°ƒç”¨ GPT è¡¥å…¨å‰©ä½™ Sessions
  const complementPrompt = `
    You previously generated ${actualCount} sessions.
    Now generate EXACTLY ${missing} MORE sessions.
    Continue from Session ${actualCount + 1} to Session ${requestedCount}.
  `;

  // åˆå¹¶åŸå§‹å’Œè¡¥å…¨çš„ Sessions
  allSessions = [...originalSessions, ...complementSessions];
}
```

#### 3. æ™ºèƒ½æˆªæ–­ï¼ˆä¿®å¤ï¼‰

å¦‚æœ GPT ç”Ÿæˆçš„æ•°é‡è¿‡å¤šï¼Œè‡ªåŠ¨æˆªæ–­ï¼š

```typescript
if (actualCount > requestedCount) {
  sessions = sessions.slice(0, requestedCount);
}
```

### æŠ€æœ¯å®ç°

**ä½ç½®**: `backend/src/controllers/questions.controller.ts`

**æ ¸å¿ƒé€»è¾‘**ï¼š

```typescript
// 1. éªŒè¯ç”Ÿæˆçš„æ•°é‡
const actualCount = parsedContent.questions?.length || 0;
const requestedCount = Math.min(body.number, 10);

// 2. è®°å½•è¯¦ç»†æ—¥å¿—
console.log('ğŸ“Š Session Count Verification:', {
  requested: requestedCount,
  actualGenerated: actualCount,
  match: actualCount === requestedCount ? 'âœ…' : 'âŒ'
});

// 3. æ™ºèƒ½è¡¥å…¨æˆ–æˆªæ–­
if (actualCount < requestedCount) {
  // è°ƒç”¨ GPT è¡¥å…¨
  const complementResponse = await openaiClient.chat.completions.create({...});
  parsedContent.questions = [...original, ...complement];
} else if (actualCount > requestedCount) {
  // æˆªæ–­å¤šä½™çš„
  parsedContent.questions = parsedContent.questions.slice(0, requestedCount);
}
```

### æ•ˆæœ

- âœ… **å‡†ç¡®æ€§**: 100% ä¿è¯ç”Ÿæˆæ­£ç¡®æ•°é‡çš„ Sessions
- âœ… **è´¨é‡**: è¡¥å…¨çš„ Sessions ä¸åŸå§‹ Sessions è´¨é‡ä¸€è‡´
- âœ… **è¿è´¯æ€§**: è¡¥å…¨çš„ Sessions è‡ªç„¶è¡”æ¥åŸå§‹å†…å®¹
- âœ… **å¯è¿½æº¯**: è¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºè°ƒè¯•

### ç›¸å…³ Prompt æ›´æ–°

**æ–‡ä»¶**:
- `backend/src/lib/prompts/generate-sessions.ts`
- `backend/src/lib/prompts/generate-market-research-sessions.ts`
- `backend/src/lib/prompts/generate-product-research-sessions.ts`

**æ›´æ–°å†…å®¹**: æ·»åŠ ä¸¥æ ¼çš„æ•°é‡è¦æ±‚è­¦å‘Š

---

## ğŸ¨ æ·±åº¦è®¿è°ˆ Prompt ä¼˜åŒ– (v1.3.7)

### ä¼˜åŒ–ç›®æ ‡

é’ˆå¯¹æ·±åº¦è®¿è°ˆæ¨¡å¼ï¼ˆDavidï¼‰çš„ Prompt è¿›è¡Œå…¨é¢ä¼˜åŒ–ï¼Œæå‡ç”Ÿæˆçš„è®¿è°ˆå¤§çº²è´¨é‡ï¼š

1. **å¼ºåŒ–å¼€æ”¾æ€§é—®é¢˜è®¾è®¡åŸåˆ™**
2. **æ·»åŠ  Study Objective å¿…é—®é¡¹è¯†åˆ«é€»è¾‘**
3. **ä¼˜åŒ–è¿½é—®è®¾è®¡ç­–ç•¥**ï¼ˆå…³é”®é—®é¢˜ vs å³å…´è¿½é—®ï¼‰
4. **æ¸…ç†æœ¬åœ°åŒ–ç›¸å…³å†…å®¹**ï¼ˆå·²æ‹†åˆ†åˆ°ç‹¬ç«‹å‡½æ•°ï¼‰

### 1. å¼€æ”¾æ€§é—®é¢˜è®¾è®¡åŸåˆ™ ğŸ¯

**æ ¸å¿ƒç†å¿µ**: è®©å‚ä¸è€…å®šä¹‰è‡ªå·±çš„ä½“éªŒï¼Œä¸é¢„è®¾ç«‹åœºæˆ–å‡è®¾ã€‚

#### âŒ é¿å…çš„é—®é¢˜ç±»å‹

**å¼•å¯¼æ€§é—®é¢˜**ï¼ˆå‡è®¾é—®é¢˜å­˜åœ¨ï¼‰:
```
âŒ "How difficult is it to manage your tasks?"
âŒ "How often do you struggle with [task]?"
âŒ "What challenges do you face when..."
```

**æš—ç¤ºæ€§é—®é¢˜**ï¼ˆå‡è®¾éœ€æ±‚å­˜åœ¨ï¼‰:
```
âŒ "What features would you like to see?"
âŒ "What improvements would you suggest?"
âŒ "Don't you think X would be helpful?"
```

**å‡è®¾æ€§é—®é¢˜**ï¼ˆå‡è®¾ä½“éªŒæ˜¯æ­£é¢æˆ–è´Ÿé¢çš„ï¼‰:
```
âŒ "What do you like about [Feature]?"
âŒ "How useful is [Feature]?"
âŒ "What frustrates you about..."
```

#### âœ… æ¨èçš„é—®é¢˜ç±»å‹

**è¡Œä¸ºæ¢ç´¢é—®é¢˜**:
```
âœ… "Tell me about how you currently manage your tasks."
âœ… "Walk me through your typical workflow for [scenario]."
âœ… "Can you describe a recent time when you [did X]?"
```

**ä½“éªŒæè¿°é—®é¢˜**:
```
âœ… "What's your experience been like with [topic]?"
âœ… "How does [Product] fit into your daily routine?"
âœ… "Tell me about your experience using [Feature]."
```

**å…·ä½“æ¡ˆä¾‹é—®é¢˜**:
```
âœ… "Can you walk me through a specific recent example?"
âœ… "What happened the last time you [did X]?"
âœ… "Tell me about a time when..."
```

#### å…³é”®åŸåˆ™

1. **èšç„¦è¡Œä¸º**ï¼šé—®äººä»¬åšä»€ä¹ˆï¼Œè€Œéæƒ³ä»€ä¹ˆ
2. **é¿å…åˆ¤æ–­è¯**ï¼šä¸ä½¿ç”¨ "difficult", "struggle", "problem", "useful" ç­‰è¯ï¼ˆé™¤éç”¨æˆ·å…ˆæåˆ°ï¼‰
3. **ä¸­æ€§æ¢ç´¢**ï¼šä½¿ç”¨ "tell me about", "walk me through", "describe", "what's your experience"
4. **å…·ä½“æ¡ˆä¾‹**ï¼šè¦æ±‚å…·ä½“çš„è¿‡å»è¡Œä¸ºï¼Œè€Œéå‡è®¾æˆ–æ„è§

### 2. Study Objective å¿…é—®é¡¹è¯†åˆ« ğŸ”‘

**åŠŸèƒ½**: è‡ªåŠ¨è¯†åˆ«ç ”ç©¶ç›®æ ‡ä¸­æ˜ç¡®è¦æ±‚çš„å¿…é—®é—®é¢˜æˆ–æ•°æ®æ”¶é›†é¡¹ã€‚

#### è¯†åˆ«é€»è¾‘

Prompt ä¼šåˆ†æ Research Objectiveï¼Œè¯†åˆ«ï¼š
- æ˜ç¡®è¦æ±‚çš„é—®é¢˜
- å¿…é¡»æ”¶é›†çš„æ•°æ®ç‚¹
- ç‰¹å®šçš„åŠŸèƒ½æˆ–ä¸»é¢˜éªŒè¯éœ€æ±‚
- å…³é”®çš„ç”¨æˆ·ç¾¤ä½“æˆ–åœºæ™¯

#### èå…¥ç­–ç•¥

**æˆ˜ç•¥æ€§æ”¾ç½®**:
- äººå£ç»Ÿè®¡é—®é¢˜ â†’ Session 1ï¼ˆç ´å†°ç¯èŠ‚ï¼‰
- ç‰¹å®šåŠŸèƒ½éªŒè¯ â†’ Session 3ï¼ˆæ ¸å¿ƒåŠŸèƒ½æ·±æŒ–ï¼‰
- ç«å“å¯¹æ¯” â†’ Session 5ï¼ˆç«å“å¯¹æ¯”ç¯èŠ‚ï¼‰

**æ˜ç¡®æ ‡è®°**:
```
Q3.2 [Interviewer notes: [MUST-ASK per Study Objective] This question validates
the new feature mentioned in research objective...]
Question: "Tell me about your experience with [specific feature]."
```

#### æ•ˆæœ

- âœ… ç¡®ä¿å…³é”®ç ”ç©¶ç›®æ ‡ä¸ä¼šè¢«é—æ¼
- âœ… å¿…é—®é¡¹è‡ªç„¶èå…¥è®¿è°ˆæµç¨‹
- âœ… é¢è¯•å®˜æ¸…æ¥šçŸ¥é“å“ªäº›é—®é¢˜æ˜¯å¿…é¡»é—®çš„

### 3. æ™ºèƒ½è¿½é—®ç­–ç•¥ ğŸ¯

**æ ¸å¿ƒç†å¿µ**: å…³é”®é—®é¢˜æ·±æŒ–ï¼Œä¸€èˆ¬é—®é¢˜çµæ´»ã€‚

#### A. ç¡¬ç¼–ç è¿½é—®ï¼ˆä»…ç”¨äºå…³é”®é—®é¢˜ï¼‰

**ä½¿ç”¨æ¡ä»¶**ï¼ˆå¿…é¡»åŒæ—¶æ»¡è¶³ï¼‰:
- âœ… é—®é¢˜ç›´æ¥å…³è”æ ¸å¿ƒç ”ç©¶ç›®æ ‡
- âœ… é—®é¢˜æ˜¯ Study Objective çš„å¿…é—®é¡¹
- âœ… ç¼ºå¤±è¿½é—®ä¼šå¯¼è‡´å…³é”®æ´å¯Ÿç¼ºå¤±
- âœ… è¿½é—®æ¢ç´¢çš„ç»´åº¦ä¸ä¼šè‡ªç„¶æ¶Œç°

**æ ¼å¼**:
```
**Follow-up Strategy:**
[Condition 1: If user mentions X] "Follow-up question..."
[Condition 2: If user describes Y] "Follow-up question..."
**Skip Conditions:** If context is awkward or user has already answered, skip
```

**ç¤ºä¾‹**:
```
Q3.1 [MUST-ASK] Question: "Tell me about your experience with [new feature]."

**Follow-up Strategy:**
[If user describes usage] "Can you walk me through a specific recent example?"
[If user mentions any friction] "Tell me more about that - what happened?"
**Skip Conditions:** If user has already provided detailed examples, skip follow-ups
```

#### B. å³å…´è¿½é—®ï¼ˆç”¨äºä¸€èˆ¬é—®é¢˜ï¼‰

**ä½¿ç”¨æ¡ä»¶**:
- é—®é¢˜ä¸æ˜¯æ ¸å¿ƒç ”ç©¶ç›®æ ‡çš„å…³é”®éƒ¨åˆ†
- è¿½é—®å¯ä»¥æ ¹æ®ç”¨æˆ·å›ç­”çµæ´»è°ƒæ•´
- ä¸éœ€è¦ç‰¹å®šç»´åº¦çš„æ·±æŒ–

**æ ‡è®°æ–¹å¼**:
```
Q2.3 [Interviewer notes: [Rely on impromptu follow-ups based on user response]]
Question: "What else happens in this process?"
```

**ä¼˜åŠ¿**:
- é¿å…è¿‡åº¦è„šæœ¬åŒ–
- è®¿è°ˆæ›´è‡ªç„¶ã€æ›´åƒçœŸå®å¯¹è¯
- å……åˆ†åˆ©ç”¨ Retell AI çš„å³å…´è¿½é—®èƒ½åŠ›

#### C. æ ‡å‡†å³å…´è¿½é—®æŒ‡ä»¤

æ¯ä¸ª Session éƒ½åŒ…å«æ ‡å‡†æŒ‡å¯¼ï¼š

```
**Impromptu Follow-up Guidance**:
If the user shares any new information relevant to our research goals,
conduct 1-2 follow-up questions to understand deeply (why/what/how/impact).
If irrelevant, briefly acknowledge and continue. For questions with set
follow-ups, skip if user has already answered in main response. When
acknowledging responses, vary your expressions: 'okay,' 'I see,'
'understood,' 'that makes sense,' 'got it,' 'right,' etc.
```

### 4. æœ¬åœ°åŒ–å†…å®¹æ¸…ç† ğŸ§¹

**å˜æ›´**:
- âŒ ç§»é™¤è¯¦ç»†çš„æ–‡åŒ–é€‚é…æŒ‡ä»¤
- âŒ ç§»é™¤ "Localization Reminders" ç« èŠ‚
- âœ… ç®€åŒ–è¯­è¨€é…ç½®ï¼ˆä»…ä¿ç•™åŸºæœ¬è¯­è¨€è¦æ±‚ï¼‰
- âœ… æ·»åŠ è¯´æ˜ï¼šæ–‡åŒ–é€‚é…åœ¨ç‹¬ç«‹æ­¥éª¤ä¸­å¤„ç†

**åŸå› **:
- æœ¬åœ°åŒ–åŠŸèƒ½å·²æ‹†åˆ†åˆ° `backend/src/lib/prompts/localize-outline.ts`
- å¤§çº²ç”Ÿæˆèšç„¦å†…å®¹è´¨é‡ï¼Œæœ¬åœ°åŒ–èšç„¦æ–‡åŒ–é€‚é…
- èŒè´£åˆ†ç¦»ï¼Œæå‡å„è‡ªè´¨é‡

### 5. å¸‚åœºè°ƒç ”ç‰¹å®šä¼˜åŒ–

#### ç—›ç‚¹å‘ç°ï¼ˆè€Œéå‡è®¾ï¼‰

**æ—§æ–¹æ³•**ï¼ˆå‡è®¾ç—›ç‚¹å­˜åœ¨ï¼‰:
```
âŒ "What frustrates you the most when dealing with [scenario]?"
```

**æ–°æ–¹æ³•**ï¼ˆè®©ç—›ç‚¹è‡ªç„¶æ¶Œç°ï¼‰:
```
âœ… "Tell me about your current process for [scenario]."
â†’ [If user mentions friction] "Tell me more about that - what happened?"
```

#### ç†æƒ³è§£å†³æ–¹æ¡ˆæ¢ç´¢

**æ—§æ–¹æ³•**ï¼ˆç›´æ¥é—®åŠŸèƒ½éœ€æ±‚ï¼‰:
```
âŒ "What features would you like to see?"
```

**æ–°æ–¹æ³•**ï¼ˆæ¢ç´¢ç†æƒ³çŠ¶æ€ï¼‰:
```
âœ… "If you could wave a magic wand, how would this process work ideally?"
â†’ "What's most important in that ideal scenario?"
```

### 6. äº§å“è°ƒç ”ç‰¹å®šä¼˜åŒ–

#### åŠŸèƒ½å‘ç°ï¼ˆè€Œéå‡è®¾ï¼‰

**æ—§æ–¹æ³•**ï¼ˆå‡è®¾ç”¨æˆ·å·²å‘ç°åŠŸèƒ½ï¼‰:
```
âŒ "How useful is [Feature]?"
```

**æ–°æ–¹æ³•**ï¼ˆæ¢ç´¢å®é™…ä½¿ç”¨ï¼‰:
```
âœ… "Tell me about your experience using [Product]."
â†’ [If user mentions feature] "How did you first come across this feature?"
â†’ "What's your understanding of what it does?"
â†’ "How often do you use it? In what situations?"
```

#### ç«å“å¯¹æ¯”ç­–ç•¥

**æ—§æ–¹æ³•**ï¼ˆç›´æ¥é—®ç«å“ï¼‰:
```
âŒ "Which competitors have you used?"
```

**æ–°æ–¹æ³•**ï¼ˆè‡ªç„¶å¼•å‡ºå¯¹æ¯”ï¼‰:
```
âœ… "Before using [Product], what tools or methods did you use for [task]?"
â†’ [If they mention alternatives] "What's different about your experience
   with [Product] compared to [Alternative]?"
```

### ä¼˜åŒ–æ•ˆæœ

**è´¨é‡æå‡**:
- âœ… ç”Ÿæˆçš„é—®é¢˜æ›´åŠ å¼€æ”¾ã€æ— åè§
- âœ… å‡å°‘å¼•å¯¼æ€§é—®é¢˜å¯¼è‡´çš„æ•°æ®åå·®
- âœ… è®¿è°ˆæµç¨‹æ›´è‡ªç„¶ã€æ›´åƒçœŸå®å¯¹è¯

**ç›®æ ‡è¾¾æˆ**:
- âœ… å…³é”®ç ”ç©¶ç›®æ ‡çš„å¿…é—®é¡¹ä¸ä¼šé—æ¼
- âœ… æ ¸å¿ƒé—®é¢˜å¾—åˆ°æ·±åº¦æŒ–æ˜
- âœ… ä¸€èˆ¬é—®é¢˜ä¿æŒçµæ´»æ€§

**ç”¨æˆ·ä½“éªŒ**:
- âœ… å‚ä¸è€…æ„Ÿè§‰æ›´èˆ’é€‚ï¼Œæ„¿æ„åˆ†äº«çœŸå®ä½“éªŒ
- âœ… é¢è¯•å®˜æœ‰æ¸…æ™°çš„æŒ‡å¯¼ï¼ŒçŸ¥é“ä½•æ—¶æ·±æŒ–ã€ä½•æ—¶çµæ´»
- âœ… è®¿è°ˆèŠ‚å¥æ›´è‡ªç„¶ï¼Œä¸ä¼šæ„Ÿè§‰æœºæ¢°

### å½±å“çš„æ–‡ä»¶

- `backend/src/lib/prompts/generate-market-research-sessions.ts` (248 lines â†’ 279 lines)
- `backend/src/lib/prompts/generate-product-research-sessions.ts` (241 lines â†’ 274 lines)

---

## ğŸ¯ è¿½é—®ç”Ÿæˆé€»è¾‘ä¼˜åŒ– (v1.3.8)

### ä¼˜åŒ–ç›®æ ‡

è¿›ä¸€æ­¥ä¼˜åŒ–è¿½é—®ç”Ÿæˆé€»è¾‘ï¼Œä½¿è®¿è°ˆæ‰§è¡Œæ›´çµæ´»ã€æ›´è‡ªç„¶ï¼š

1. **ç§»é™¤å³å…´è¿½é—®ç›¸å…³å†…å®¹**ï¼ˆç³»ç»Ÿè‡ªåŠ¨å¤„ç†ï¼‰
2. **è¿½é—®æ”¹ä¸ºæ–¹å‘æ€§æŒ‡ç¤º**ï¼ˆè€Œéå›ºå®šå¥å­ï¼‰
3. **Session æ¡ˆä¾‹æŠ½è±¡åŒ–**ï¼ˆé¿å…è¿‡åº¦å…·è±¡ï¼‰
4. **åˆ é™¤è¿‡æ‹Ÿåˆè§„åˆ™**ï¼ˆå¦‚ AI collectionï¼‰

### æ ¸å¿ƒå˜æ›´

#### 1. ç§»é™¤å³å…´è¿½é—®æŒ‡å¯¼ ğŸ§¹

**åˆ é™¤å†…å®¹**:
- âŒ "Standard Impromptu Instructions" ç« èŠ‚
- âŒ "Impromptu Follow-up Guidance" å†…å®¹

**åŸå› **: è®¿è°ˆæ‰§è¡Œç³»ç»Ÿï¼ˆRetell AIï¼‰å·²å†…ç½®å³å…´è¿½é—®èƒ½åŠ›ï¼Œåœ¨å¤§çº²ç”Ÿæˆé˜¶æ®µé‡å¤æŒ‡å¯¼æ˜¯å†—ä½™çš„ã€‚

#### 2. è¿½é—®æ”¹ä¸ºæ–¹å‘æ€§æŒ‡ç¤º ğŸ¯

**æ—§æ ¼å¼**ï¼ˆå›ºå®šå¥å­ï¼‰:
```
[If user mentions friction] "Can you tell me more? What happened?"
```

**æ–°æ ¼å¼**ï¼ˆæ–¹å‘æ€§æŒ‡ç¤ºï¼‰:
```
[If user mentions friction] â†’ Probe for: specific examples, impact, solutions
```

**ä¼˜åŠ¿**: Agent å¯æ ¹æ®è¯­å¢ƒçµæ´»æªè¾ï¼Œè®¿è°ˆæ›´è‡ªç„¶ã€‚

#### 3. Session æ¡ˆä¾‹æŠ½è±¡åŒ– ğŸ“‹

**æ—§æ ¼å¼**ï¼ˆè¿‡äºå…·è±¡ï¼‰:
```
- Session 1: Ice-breaking + Current behavior
- Session 2: Pain points deep dive
- Session 5: AI/Technology expectations
```

**æ–°æ ¼å¼**ï¼ˆæŠ½è±¡åŸåˆ™ï¼‰:
```
Session Flow: Intro â†’ Open Exploration â†’ Targeted Collection â†’ Closure
Session Themes: Early (context) â†’ Middle (deep dive) â†’ Later (synthesis)
```

#### 4. åˆ é™¤è¿‡æ‹Ÿåˆè§„åˆ™ ğŸ§¹

**åˆ é™¤**: "AI/Technology Expectations" ç« èŠ‚ï¼ˆé€†å‘å·¥ç¨‹æ—¶è¿‡æ‹Ÿåˆçš„ç‰¹å®šæ¡ˆä¾‹ï¼‰

### ä¼˜åŒ–æ•ˆæœ

- âœ… è®¿è°ˆæ›´çµæ´»ã€æ›´è‡ªç„¶
- âœ… å¤§çº²æ›´é€‚é…å…·ä½“ç ”ç©¶ç›®æ ‡
- âœ… èŒè´£åˆ†ç¦»ï¼šå¤§çº²èšç„¦å…³é”®é—®é¢˜ï¼Œæ‰§è¡Œèšç„¦çµæ´»æªè¾

### å½±å“çš„æ–‡ä»¶

- `backend/src/lib/prompts/generate-market-research-sessions.ts` (279 lines â†’ 272 lines)
- `backend/src/lib/prompts/generate-product-research-sessions.ts` (279 lines â†’ 272 lines)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½](./04-å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½.md)
- [æŠ€æœ¯æ¶æ„](./01-æŠ€æœ¯æ¶æ„.md)
- [æ•°æ®åº“è®¾è®¡](./02-æ•°æ®åº“è®¾è®¡.md)

---

**ç»´æŠ¤è€…**: Userology å¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-10-26

