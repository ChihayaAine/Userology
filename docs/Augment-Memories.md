# Augment Memories - Userology-Foloup é¡¹ç›®

> **ç‰ˆæœ¬**: 1.4.0
> **æœ€åæ›´æ–°**: 2025-10-30
> **é¡¹ç›®**: AIé©±åŠ¨çš„ç”¨æˆ·ç ”ç©¶è®¿è°ˆå¹³å°

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### è®¿è°ˆå‡†å¤‡ç³»ç»Ÿ

**ä¸¤æ­¥å¤§çº²ç”Ÿæˆ** (v1.4.0 æ–°å¢):
- **Step 1: ç”Ÿæˆéª¨æ¶** - ç”Ÿæˆ Session ä¸»é¢˜ã€ç›®æ ‡ã€èƒŒæ™¯ä¿¡æ¯
  - ä¸éœ€è¦ interview_idï¼Œå¯åœ¨åˆ›å»º interview å‰ç”Ÿæˆ
  - æ”¯æŒç”¨æˆ·é¢„è®¾ Session ä¸»é¢˜ï¼ˆAI ä¸¥æ ¼éµå¾ªï¼‰
  - è¾“å‡ºåŒ…å« must_ask_questions å­—æ®µ
- **Step 2: ç”¨æˆ· Review** - ç”¨æˆ·å¯ç¼–è¾‘éª¨æ¶çš„æ‰€æœ‰å­—æ®µ
  - ç¼–è¾‘ Session æ ‡é¢˜ã€ç›®æ ‡ã€èƒŒæ™¯ä¿¡æ¯
  - æ·»åŠ å¿…é—®é—®é¢˜ï¼ˆè‡ªç„¶èå…¥è®¿è°ˆæµç¨‹ï¼‰
  - å®æ—¶ä¿å­˜åˆ° Zustand Store
- **Step 3: ç”Ÿæˆå®Œæ•´å¤§çº²** - åŸºäºå®¡æ ¸åçš„éª¨æ¶ç”Ÿæˆ 4-6 ä¸ªå…·ä½“é—®é¢˜
  - ä¸ºå…³é”®é—®é¢˜ç”Ÿæˆè¿½é—®ç­–ç•¥
  - ç”Ÿæˆ Session 1 Openingï¼ˆ6 ä¸ªå…ƒç´ ï¼‰
  - å¿…é—®é—®é¢˜æ ‡è®°ä¸º [MUST-ASK per User Requirement]
- **æ•°æ®åº“å­—æ®µ**: `outline_skeleton`, `outline_generation_status`, `skeleton_generated_at`
- **API**:
  - `POST /api/outlines/skeleton` - ç”Ÿæˆéª¨æ¶
  - `PATCH /api/outlines/:id/skeleton` - æ›´æ–°éª¨æ¶
  - `POST /api/outlines/:id/full-outline` - ç”Ÿæˆå®Œæ•´å¤§çº²

**å¤§çº²ç”Ÿæˆï¼ˆæ—§æµç¨‹ï¼Œä¿ç•™å‘åå…¼å®¹ï¼‰**:
- æ”¯æŒæ ‡å‡†é—®é¢˜æ¨¡å¼ï¼ˆLisa/Bobï¼‰å’Œæ·±åº¦è®¿è°ˆæ¨¡å¼ï¼ˆDavidï¼‰
- AI è‡ªåŠ¨ç”Ÿæˆè®¿è°ˆé—®é¢˜å’Œ Sessions
- å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰ï¼‰
- åŸºäºç ”ç©¶ç›®æ ‡ã€ä¸Šä¸‹æ–‡å’Œä¸ªæ€§åŒ–å¤‡æ³¨ç”Ÿæˆ
- API: `/api/generate-interview-questions` å’Œ `/api/generate-interview-sessions`

**å¤§çº²æœ¬åœ°åŒ–**:
- ä¸¤æ­¥èµ°æµç¨‹ï¼šè°ƒè¯•è¯­è¨€ â†’ è®¿è°ˆè¯­è¨€
- AI æ·±åº¦æœ¬åœ°åŒ–ï¼ˆæ–‡åŒ–é€‚é…ï¼Œéç®€å•ç¿»è¯‘ï¼‰
- ç‰ˆæœ¬åˆ†ç¦»å­˜å‚¨ï¼ˆdraft_outline + localized_outlineï¼‰
- åªè¯»ä¿æŠ¤æœ¬åœ°åŒ–ç‰ˆæœ¬ï¼Œé˜²æ­¢è¯¯ç¼–è¾‘
- API: `/api/localize-outline`

---

### è®¿è°ˆæ‰§è¡Œç³»ç»Ÿ

**Retell AI è¯­éŸ³äº¤äº’**:
- å®æ—¶è¯­éŸ³è¯†åˆ«ï¼ˆSpeech-to-Textï¼‰
- å®æ—¶è¯­éŸ³åˆæˆï¼ˆText-to-Speechï¼‰
- æ™ºèƒ½å¯¹è¯ç®¡ç†ï¼ˆConversation Flowï¼‰

**ä¸‰ç§é¢è¯•å®˜æ¨¡å¼**:
1. **Explorer Lisa**: æ¢ç´¢æ€§è®¿è°ˆï¼Œå‹å¥½å¼€æ”¾
2. **Empathetic Bob**: åŒç†å¿ƒè®¿è°ˆï¼Œæ¸©å’Œè€å¿ƒ
3. **Deep Dive David**: æ·±åº¦è®¿è°ˆï¼Œå¤šé˜¶æ®µ Session æµç¨‹ï¼ˆæœ€å¤š 10 ä¸ª Sessionsï¼‰

**æŠ€æœ¯å®ç°**:
- å‰ç«¯: RetellWebClient (æµè§ˆå™¨ç«¯ SDK)
- åç«¯: Retell SDK (Node.js)
- AI Agent: Retell LLM (GPT-4o)
- è¯­éŸ³å¼•æ“: 11labs

---

### è®¿è°ˆåˆ†æç³»ç»Ÿ

**å•è®¿è°ˆåˆ†æ**:
- **åŸºç¡€åˆ†æ** (Analytics): é—®é¢˜æ€»ç»“ + è®¿è°ˆæ€»ç»“
- **æ·±åº¦æ€»ç»“** (Summary): å…³é”®æ´å¯Ÿ + é‡è¦å¼•ç”¨
- ä¸¤é˜¶æ®µåˆ†ææ¶æ„ï¼Œè‡ªåŠ¨è§¦å‘
- æ”¯æŒå¤šè¯­è¨€è¾“å‡ºï¼ˆæ ¹æ®è®¿è°ˆè¯­è¨€ï¼‰
- API: `/api/analytics/generate`

**æ•°æ®ç»“æ„**:
```typescript
{
  analytics: {
    questionSummaries: [...],
    callSummary: string
  },
  insights_with_evidence: [{
    content: string,
    category: string,
    supporting_quotes: [...]
  }]
}
```

---

### è°ƒç ”åˆ†æç³»ç»Ÿ

**è·¨è®¿è°ˆæ´å¯Ÿç”Ÿæˆ**:
- ä»å¤šä¸ªè®¿è°ˆä¸­æå–ç»¼åˆæ´å¯Ÿ
- è¯†åˆ«æ¨¡å¼å’Œè¶‹åŠ¿
- ä¸¤é˜¶æ®µ AI ç”Ÿæˆæ¶æ„

**é˜¶æ®µ 1**: åˆ†æç ”ç©¶ç›®æ ‡ï¼Œæå–é¢„æœŸäº¤ä»˜ç‰©ç±»å‹
- action_plansï¼ˆè¡ŒåŠ¨è®¡åˆ’ï¼‰
- pricing_analysisï¼ˆå®šä»·åˆ†æï¼‰
- pain_pointsï¼ˆç—›ç‚¹åˆ†æï¼‰
- generalï¼ˆé€šç”¨åˆ†æï¼‰

**é˜¶æ®µ 2**: æ ¹æ®äº¤ä»˜ç‰©ç±»å‹ç”Ÿæˆå®šåˆ¶åŒ–å†…å®¹
- Executive Summaryï¼ˆæ‰§è¡Œæ‘˜è¦ï¼‰
- Objective Deliverablesï¼ˆç›®æ ‡äº¤ä»˜ç‰©ï¼‰
- Cross-Interview Insightsï¼ˆè·¨è®¿è°ˆæ´å¯Ÿï¼‰

**API**: `/api/analytics/study-summary`

---

## ğŸ¯ é¡¹ç›®æ ¸å¿ƒä¿¡æ¯

### é¡¹ç›®å®šä½
AIé©±åŠ¨çš„ç”¨æˆ·ç ”ç©¶è®¿è°ˆå¹³å°ï¼Œé€šè¿‡è¯­éŸ³AIè‡ªåŠ¨åŒ–è¿›è¡Œç”¨æˆ·è®¿è°ˆå¹¶ç”Ÿæˆæ·±åº¦åˆ†ææŠ¥å‘Šã€‚

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Next.js 14 + TypeScript (ç«¯å£ 8089)
- **åç«¯**: Express.js + TypeScript (ç«¯å£ 8090)
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **AIæœåŠ¡**: OpenAI GPT-4o (é€šè¿‡ tu-zi.com ä»£ç†)
- **è¯­éŸ³**: Retell AI
- **è®¤è¯**: Clerk

### é¡¹ç›®ç»“æ„
```
Userology-Foloup/
â”œâ”€â”€ frontend/          # Next.js å‰ç«¯
â”œâ”€â”€ backend/           # Express åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ lib/prompts/
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”œâ”€â”€ migrations/    # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ scripts/       # å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .env               # ç¯å¢ƒå˜é‡
```

---

## ğŸ”‘ å…³é”®å†³ç­–è®°å½•

### 1. å¤§çº²æœ¬åœ°åŒ–æ¶æ„è®¾è®¡

**æ ¸å¿ƒç†å¿µ**:
- ç ”ç©¶å‘˜ç”¨ç†Ÿæ‚‰çš„è¯­è¨€è°ƒè¯•å¤§çº²
- AI æ·±åº¦æœ¬åœ°åŒ–åˆ°ç›®æ ‡è¯­è¨€ï¼ˆæ–‡åŒ–é€‚é…ï¼Œéç®€å•ç¿»è¯‘ï¼‰

**æŠ€æœ¯å®ç°**:
1. **åˆ†ç¦»å­˜å‚¨**: `draft_outline` å’Œ `localized_outline` å­—æ®µ
2. **ä¼˜å…ˆçº§**: `questions` å­—æ®µä¼˜å…ˆä½¿ç”¨æœ¬åœ°åŒ–ç‰ˆæœ¬
3. **åªè¯»ä¿æŠ¤**: æœ¬åœ°åŒ–ç‰ˆæœ¬ä¸ºåªè¯»
4. **è¯­è¨€è®°å½•**: `outline_debug_language` å’Œ `language` å­—æ®µ

### 2. Prompt å·¥ç¨‹ç­–ç•¥

**Temperature è®¾ç½®**:
- åˆ†æç±»ä»»åŠ¡: 0.0ï¼ˆç¡®å®šæ€§ï¼‰
- ç”Ÿæˆç±»ä»»åŠ¡: 0.7ï¼ˆè‡ªç„¶è¡¨è¾¾ï¼‰
- æœ¬åœ°åŒ–ä»»åŠ¡: 0.7ï¼ˆæ–‡åŒ–é€‚é…ï¼‰

**Prompt è®¾è®¡åŸåˆ™**:
- æ˜ç¡®è§’è‰²å®šä½ï¼ˆä¸“å®¶èº«ä»½ï¼‰
- ç»“æ„åŒ–è¾“å‡ºï¼ˆJSON æ ¼å¼ï¼‰
- è¯­è¨€ç‰¹å®šæŒ‡ä»¤ï¼ˆé’ˆå¯¹ä¸åŒè¯­è¨€ï¼‰
- å¼ºè°ƒè´¨é‡æ ‡å‡†ï¼ˆå¼€æ”¾æ€§ã€æ·±åº¦ã€ç›¸å…³æ€§ï¼‰

### 3. å‰åç«¯åˆ†ç¦»æ¶æ„

**å½“å‰æ¶æ„**:
- å‰ç«¯: Next.js 14 (ç«¯å£ 8089)
- åç«¯: Express.js (ç«¯å£ 8090)
- API é€šä¿¡: RESTful
- æ•°æ®åº“: Supabase (PostgreSQL)

**ä¼˜åŠ¿**:
- ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
- æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡è¦ç‚¹

### æ ¸å¿ƒè¡¨ç»“æ„

**interview è¡¨**:
- å­˜å‚¨ç ”ç©¶åŸºæœ¬ä¿¡æ¯ï¼ˆname, objective, descriptionï¼‰
- é—®é¢˜/Sessions æ•°æ®ï¼ˆquestions, draft_outline, localized_outlineï¼‰
- è¯­è¨€é…ç½®ï¼ˆlanguage, outline_debug_languageï¼‰
- è·¨è®¿è°ˆåˆ†æç»“æœï¼ˆexecutive_summary, objective_deliverables, cross_interview_insightsï¼‰

**response è¡¨**:
- å­˜å‚¨å•ä¸ªè®¿è°ˆçš„å“åº”æ•°æ®
- åŸºç¡€åˆ†æï¼ˆanalyticsï¼‰
- æ·±åº¦æ€»ç»“ï¼ˆinsights_with_evidenceï¼‰
- å…³è”å­—æ®µï¼ˆinterview_id, call_idï¼‰

**interviewer è¡¨**:
- å­˜å‚¨é¢è¯•å®˜é…ç½®ï¼ˆLisa/Bob/Davidï¼‰
- Retell AI Agent ID
- è¯­éŸ³å’Œå“åº”å‚æ•°

### é‡è¦å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `questions` | JSONB | å®é™…è®¿è°ˆä½¿ç”¨çš„é—®é¢˜ï¼ˆä¼˜å…ˆæœ¬åœ°åŒ–ç‰ˆæœ¬ï¼‰ |
| `draft_outline` | JSONB | åˆç¨¿å¤§çº²ï¼ˆè°ƒè¯•è¯­è¨€ç‰ˆæœ¬ï¼‰ |
| `localized_outline` | JSONB | æœ¬åœ°åŒ–å¤§çº²ï¼ˆè®¿è°ˆè¯­è¨€ç‰ˆæœ¬ï¼‰ |
| `outline_debug_language` | TEXT | è°ƒè¯•è¯­è¨€ä»£ç ï¼ˆå¦‚ zh-CNï¼‰ |
| `outline_interview_language` | TEXT | è®¿è°ˆè¯­è¨€ä»£ç ï¼ˆå¦‚ en-USï¼‰ |

### æ•°æ®æµå‘
```
1. ç”Ÿæˆåˆç¨¿ â†’ draft_outline (è°ƒè¯•è¯­è¨€)
2. è°ƒè¯•ä¼˜åŒ– â†’ ä¿®æ”¹ draft_outline
3. æœ¬åœ°åŒ– â†’ localized_outline (è®¿è°ˆè¯­è¨€)
4. ä¿å­˜ â†’ questions = localized_outline || draft_outline
```

---

## ğŸ”§ æ ¸å¿ƒé…ç½®

### ç¯å¢ƒå˜é‡ (.env)
```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://hdyggfbtwuthymhlrznl.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...  # ç”¨äºæ•°æ®åº“è¿ç§»

# OpenAI (é€šè¿‡ tu-zi.com ä»£ç†)
OPENAI_API_KEY=sk-mhStWDss5vDY1H4B8CHOfS1pINUucaBo7V9j1yLsx0RZ4GtT
OPENAI_API_BASE=https://api.tu-zi.com/v1

# Retell AI
RETELL_API_KEY=key_08158b97910706a5118c4c404151

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# ç«¯å£
FRONTEND_PORT=8089
BACKEND_PORT=8090
FRONTEND_URL=http://47.93.101.73:8089
NEXT_PUBLIC_API_URL=http://localhost:8090/api
```

### æ”¯æŒçš„è¯­è¨€
- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ (zh-CN)
- ğŸ‡¹ğŸ‡¼ ç¹ä½“ä¸­æ–‡ (zh-TW)
- ğŸ‡ºğŸ‡¸ è‹±è¯­ (en-US)
- ğŸ‡¯ğŸ‡µ æ—¥è¯­ (ja-JP)
- ğŸ‡«ğŸ‡· æ³•è¯­ (fr-FR)
- ğŸ‡©ğŸ‡ª å¾·è¯­ (de-DE)
- ğŸ‡ªğŸ‡¸ è¥¿ç­ç‰™è¯­ (es-ES)

---

## ğŸš€ å¯åŠ¨æµç¨‹

### æœ¬åœ°å¼€å‘
```bash
# åç«¯
cd backend
npm install
npm run dev  # ç«¯å£ 8090

# å‰ç«¯
cd frontend
npm install
npm run dev  # ç«¯å£ 8089
```

### è¿œç¨‹è®¿é—®
- **æœ¬åœ°è®¿é—®**: http://localhost:8089
- **å±€åŸŸç½‘è®¿é—®**: http://192.168.8.6:8089
- **å…¬ç½‘è®¿é—®**: http://47.93.101.73:8089

---

## ğŸ“š é‡è¦æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- `docs/README.md` - æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ
- `docs/CHANGELOG.md` - ç‰ˆæœ¬å˜æ›´å†å²
- `docs/Augment-Memories.md` - AI åŠ©æ‰‹æ ¸å¿ƒè®°å¿†åº“
- `docs/ä»»åŠ¡æ¸…å•.md` - ä»»åŠ¡ç®¡ç†å’Œè¿›åº¦è·Ÿè¸ª

### åŸºç¡€æ–‡æ¡£
- `docs/00-é¡¹ç›®æ¦‚è§ˆ.md` - é¡¹ç›®æ•´ä½“æ¶æ„
- `docs/01-æŠ€æœ¯æ¶æ„.md` - æŠ€æœ¯æ ˆå’Œç³»ç»Ÿæ¶æ„
- `docs/02-æ•°æ®åº“è®¾è®¡.md` - æ•°æ®åº“è¡¨ç»“æ„

### åŠŸèƒ½æ¨¡å—æ–‡æ¡£ï¼ˆæŒ‰ä¸šåŠ¡æµç¨‹ï¼‰
**è®¿è°ˆå‡†å¤‡é˜¶æ®µ**:
- `docs/03-å¤§çº²ç”Ÿæˆç³»ç»Ÿ.md` - AI é—®é¢˜ç”Ÿæˆï¼ˆLisa/Bob/Davidï¼‰
- `docs/04-å¤§çº²æœ¬åœ°åŒ–åŠŸèƒ½.md` - ä¸¤æ­¥èµ°å¤§çº²åˆ›å»ºæµç¨‹

**è®¿è°ˆæ‰§è¡Œé˜¶æ®µ**:
- `docs/05-è®¿è°ˆæ‰§è¡Œ-Retell AIè¯­éŸ³äº¤äº’.md` - å®æ—¶è¯­éŸ³å¯¹è¯ç³»ç»Ÿ

**è®¿è°ˆåˆ†æé˜¶æ®µ**:
- `docs/06-è®¿è°ˆåˆ†æç³»ç»Ÿ.md` - å•è®¿è°ˆæ·±åº¦åˆ†æ
- `docs/07-è°ƒç ”åˆ†æç³»ç»Ÿ.md` - è·¨è®¿è°ˆæ´å¯Ÿç”Ÿæˆ

### æŠ€æœ¯æ–‡æ¡£
- `backend/migrations/` - æ•°æ®åº“è¿ç§»è„šæœ¬
- `backend/src/lib/prompts/` - AI Prompt æ¨¡æ¿

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### æ•°æ®åº“è¿ç§»
- Supabase ä¸æ”¯æŒé€šè¿‡ API ç›´æ¥æ‰§è¡Œ DDL
- éœ€è¦åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­æ‰‹åŠ¨æ‰§è¡Œ
- ä½¿ç”¨ `backend/scripts/run-migration.js` éªŒè¯è¿ç§»çŠ¶æ€

### Service Role Key å®‰å…¨
- `SUPABASE_SERVICE_ROLE_KEY` æ‹¥æœ‰å®Œå…¨æ•°æ®åº“æƒé™
- âŒ ä¸è¦æäº¤åˆ° Git
- âŒ ä¸è¦åœ¨å‰ç«¯ä½¿ç”¨
- âœ… åªåœ¨åç«¯æœåŠ¡å™¨ç¯å¢ƒä½¿ç”¨

### é¢è¯•å®˜æ¨¡å¼
- **Lisa/Bob**: æ ‡å‡†é—®é¢˜æ¨¡å¼ï¼Œä½¿ç”¨ `questions` æ•°ç»„
- **David**: æ·±åº¦è®¿è°ˆæ¨¡å¼ï¼Œä½¿ç”¨ `sessions` æ•°ç»„ï¼ˆæœ€å¤š 10 ä¸ªï¼‰
- å¤§çº²è°ƒè¯•è¯­è¨€åŠŸèƒ½ä»…åœ¨ Deep Dive æ¨¡å¼ä¸‹å¯ç”¨

### è®¿è°ˆé“¾æ¥
- æ‰€æœ‰è®¿è°ˆé“¾æ¥ç»Ÿä¸€ä½¿ç”¨ `https://userology.xin` å‰ç¼€
- æ— è®ºåœ¨ä»€ä¹ˆç¯å¢ƒåˆ›å»ºï¼Œéƒ½æŒ‡å‘ç”Ÿäº§ç¯å¢ƒ
- ä¾¿äºå—è®¿è€…è®¿é—®å’Œåˆ†äº«

### AI åˆ†æè§¦å‘
- è®¿è°ˆç»“æŸåè‡ªåŠ¨è§¦å‘åˆ†æ
- å…ˆç”ŸæˆåŸºç¡€åˆ†æï¼ˆAnalyticsï¼‰
- å†ç”Ÿæˆæ·±åº¦æ€»ç»“ï¼ˆSummaryï¼‰
- æ”¯æŒæ‰‹åŠ¨é‡æ–°ç”Ÿæˆ

---

---

**ç»´æŠ¤è€…**: Userology å¼€å‘å›¢é˜Ÿ  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-23  
**æœ€åæ›´æ–°**: 2025-10-23

